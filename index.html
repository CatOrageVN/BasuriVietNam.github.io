<!DOCTYPE html>
<html lang="vi">
<head>
<meta charset="UTF-8">
<title>Basuri V5 Center GUI</title>
<style>
html,body{margin:0;padding:0;overflow:hidden;background:#000;font-family:Arial,sans-serif;}
#gui{
  position:absolute; top:50%; left:50%;
  transform:translate(-50%,-50%);
  width:360px; background:#0e0e0e; padding:20px; border-radius:22px;
  color:#3cff78; text-align:center; box-shadow:0 0 40px #3cff78; z-index:10;
  font-size:18px;
}
#gui .neonText{
  font-size:28px; font-weight:bold; color:#0ff;
  text-shadow:0 0 10px #0ff,0 0 20px #0ff,0 0 30px #0ff,0 0 50px #0ff;
  margin-bottom:10px;
}
#flag{
  position:absolute; top:50%; left:calc(50% + 200px);
  transform:translateY(-50%);
  font-size:64px;
  animation: wave 1s infinite alternate ease-in-out;
}
@keyframes wave{0%{transform:translateY(-50%) rotate(0deg);}50%{transform:translateY(-50%) rotate(5deg);}100%{transform:translateY(-50%) rotate(-5deg);}}
.controls button{margin:5px;padding:8px 16px;border:none;border-radius:20px;background:#3cff78;color:#000;cursor:pointer;font-size:16px;}
.controls button:hover{background:#5dff95;}
input[type=range]{width:100%; margin-top:10px;}
</style>
</head>
<body>

<div id="gui">
  <div class="neonText">BASURI V5</div>
  <div id="songName"></div>
  <audio id="audio" autoplay></audio>
  <div class="controls">
    <button onclick="prev()">‚¨ÖÔ∏è</button>
    <button onclick="play()">‚ñ∂</button>
    <button onclick="next()">‚û°Ô∏è</button>
  </div>
  <input type="range" min="0" max="1" step="0.01" value="0.7" oninput="audio.volume=this.value">
  <div style="margin-top:10px;font-size:14px;opacity:0.8;">ƒê∆∞·ª£c l√†m b·ªüi: Tu·∫•n ‚úÖ</div>
</div>

<div id="flag">üáªüá≥</div>

<script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r152/three.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/three@0.152.2/examples/jsm/controls/OrbitControls.js"></script>
<script src="https://cdn.jsdelivr.net/npm/three@0.152.2/examples/jsm/loaders/FontLoader.js"></script>
<script src="https://cdn.jsdelivr.net/npm/three@0.152.2/examples/jsm/geometries/TextGeometry.js"></script>
<script src="https://cdn.jsdelivr.net/npm/gsap@3.14.0/dist/gsap.min.js"></script>

<script>
// === DANH S√ÅCH NH·∫†C ===
const songs = [
  {file:"DangEm.mp3", name:"D√°ng Em"},
  {file:"Melody.mp3", name:"Melody"},
  {file:"TruMua.mp3", name:"Tr√∫ M∆∞a"},
  {file:"bacphan.mp3", name:"B·∫°c Ph·∫≠n"},
  {file:"chobaolau.mp3", name:"Ch·ªù Bao L√¢u"},
  {file:"laycaykimmaydo.mp3", name:"L·∫•y C√¢y Kim May ƒê·ªì"},
  {file:"songcuocdoimonglunglinh.mp3", name:"Cu·ªôc ƒê·ªùi M·ªông Lung Linh"},
  {file:"sunnghiepchuong.mp3", name:"S·ª± Nghi·ªáp Ch∆∞·ªõng"},
  {file:"yeuroisaoconphat.mp3", name:"Y√™u R·ªìi Sao C√≤n Ph·∫°t"}
];
let index = 7; // m·∫∑c ƒë·ªãnh S·ª± Nghi·ªáp Ch∆∞·ªõng
const audio = document.getElementById("audio");
const songName = document.getElementById("songName");
function load(){ audio.src = songs[index].file; songName.innerText = "üéµ " + songs[index].name; audio.play(); }
function play(){ audio.play(); }
function next(){ index = (index+1)%songs.length; load(); }
function prev(){ index = (index-1+songs.length)%songs.length; load(); }
load();

// === THREE.JS SCENE ===
const scene = new THREE.Scene();
const camera = new THREE.PerspectiveCamera(60,window.innerWidth/window.innerHeight,0.1,1000);
camera.position.set(0,3,12);
const renderer = new THREE.WebGLRenderer({antialias:true,alpha:true});
renderer.setSize(window.innerWidth,window.innerHeight);
document.body.appendChild(renderer.domElement);
const controls = new THREE.OrbitControls(camera,renderer.domElement);
controls.enableZoom = false;

// === LIGHTS ===
scene.add(new THREE.AmbientLight(0xffffff,0.3));
const musicLight = new THREE.PointLight(0xffd700,2,15);
musicLight.position.set(0,6,0);
scene.add(musicLight);

// === C√íI V√ÄNG 3D ===
function createHorn(x,y,z){
  const hornGeo = new THREE.ConeGeometry(0.3,0.7,32);
  const hornMat = new THREE.MeshStandardMaterial({color:0xffd700,emissive:0xffd700});
  const horn = new THREE.Mesh(hornGeo,hornMat);
  horn.position.set(x,y,z);
  horn.rotation.x = Math.PI/2;
  scene.add(horn);
  return horn;
}
const horn1 = createHorn(-2,1.5,0);
const horn2 = createHorn(2,1.5,0);

// === LOA 3D ===
function createSpeaker(x,y,z){
  const baseGeo = new THREE.BoxGeometry(0.8,1.2,0.5);
  const baseMat = new THREE.MeshStandardMaterial({color:0x3333ff,metalness:0.5,roughness:0.4});
  const speaker = new THREE.Mesh(baseGeo,baseMat);
  speaker.position.set(x,y,z);
  scene.add(speaker);
  return speaker;
}
const speaker1 = createSpeaker(-3,0.6,-1);
const speaker2 = createSpeaker(3,0.6,-1);

// === CH·ªÆ 3D BASURI V5 ===
const loader = new THREE.FontLoader();
loader.load('https://threejs.org/examples/fonts/helvetiker_bold.typeface.json', function(font){
  const textGeo = new THREE.TextGeometry('BASURI V5',{font:font,size:2,height:0.5});
  const textMat = new THREE.MeshStandardMaterial({color:0x00ffff,emissive:0x00ffff});
  const textMesh = new THREE.Mesh(textGeo,textMat);
  textGeo.center();
  textMesh.position.set(0,0,0);
  scene.add(textMesh);
});

// === FLAG VI·ªÜT NAM 3D ===
const flagGeo = new THREE.PlaneGeometry(4,2.5,20,10);
const flagMat = new THREE.MeshBasicMaterial({color:0xff0000,side:THREE.DoubleSide});
const flagMesh = new THREE.Mesh(flagGeo,flagMat);
flagMesh.position.set(4,1.5,0); // B√™n c·∫°nh GUI
scene.add(flagMesh);
const flagVertices = flagGeo.attributes.position.array;

// === FLAG ANIMATION ===
let clock = new THREE.Clock();
function updateFlag(){
  let t = clock.getElapsedTime();
  for(let i=0;i<flagVertices.length;i+=3){
    flagVertices[i+2]=Math.sin(i*0.3+t*5)*0.05;
  }
  flagGeo.attributes.position.needsUpdate=true;
}

// === AUDIO ANALYSER ===
const audioCtx = new (window.AudioContext||window.webkitAudioContext)();
const source = audioCtx.createMediaElementSource(audio);
const analyser = audioCtx.createAnalyser();
source.connect(analyser); analyser.connect(audioCtx.destination);
analyser.fftSize = 64;
const dataArray = new Uint8Array(analyser.frequencyBinCount);

function updateMusicEffects(){
  analyser.getByteFrequencyData(dataArray);
  let bass = Math.max(...dataArray)/256;
  musicLight.intensity = 1 + bass*4;
  horn1.scale.y = horn2.scale.y = 1 + bass*0.8;
  speaker1.scale.y = speaker2.scale.y = 1 + bass*0.3;
}

// === ANIMATE LOOP ===
function animate(){
  requestAnimationFrame(animate);
  updateFlag();
  updateMusicEffects();
  renderer.render(scene,camera);
}
animate();

// === RESIZE ===
window.addEventListener('resize',()=>{
  camera.aspect = window.innerWidth/window.innerHeight;
  camera.updateProjectionMatrix();
  renderer.setSize(window.innerWidth,window.innerHeight);
});
</script>
</body>
</html>
